<!DOCTYPE html>
<html lang="en-us">
  <head>
    <script>
      function onbodyload() {
        var token = window.location.hash.substring(14, 74);
        if(token.length == 60) {
          var xhr = new XMLHttpRequest();
          xhr.open('PUT', 'http://myfavouritesandwich.org:9002/feeds/default/private/full?alt=json', false);
          xhr.setRequestHeader('Authorization', 'Bearer '+token);
          xhr.setRequestHeader('GData-Version', '3.0');
          xhr.setRequestHeader('Content-Length', '0');
          xhr.setRequestHeader('Content-Type', 'text/plain');
          xhr.setRequestHeader('Slug', 'LetsRide');
          xhr.setRequestHeader('X-Upload-Content-Length', '30');
          xhr.setRequestHeader('X-Upload-Content-Type', 'text/plain');
          xhr.send('blabla');
          document.write(JSON.stringify(xhr.getAllResponseHeaders()));
          document.write(JSON.stringify(xhr.responseText));
        } else {
          alert('Lets get you authed up first');
          window.location = "https://accounts.google.com/o/oauth2/auth?client_id=709507725318-4h19nag3k4hv5osj1jvao0j3an3bu43t@developer.gserviceaccount.com&redirect_uri=http://example.com/unhosted/gd-proxy/static.html&scope=http://docs.google.com/feeds/&response_type=token";
        }
      }
    </script>
  </head>
  <body onload="onbodyload();">
  </body>
</html>
